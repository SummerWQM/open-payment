<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dao.TransactionResultDao">
<insert id="insert" useGeneratedKeys="true" keyProperty="id" keyColumn="id" parameterType="com.entity.PaymentTransactionResult">
    insert into payment_transaction_result (`payment_transaction_unid`,
    `amount`,
    `discount_amount`,
    `status`,
    `finish_at`,
    `message_info`)
    values (#{paymentTransactionUnid},#{amount},#{discountAmount},#{status},#{finishAt},#{messageInfo})
</insert>
    <select id="getPaymentTransactionResult" resultType="com.entity.PaymentTransactionResult">
        select * from `payment_transaction_result` where payment_transaction_unid = #{unid}
    </select>
    <update id="modifyTransactionResult">

        update payment_transaction_result

        <set>
            <if test="notifyCount!=null">notify_count=#{notifyCount}</if>
            <if test="status!=null">status=#{status}</if>
        </set>
        where payment_transaction_unid=#{id}
    </update>
</mapper>
